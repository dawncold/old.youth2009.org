---
layout: post
title: "staging server"
date: 2012-11-06 22:05
comments: true
categories: work@honovation js
---

加了一台staging server，这个就相当于有了生产环境后的测试环境，先在这里测试完毕后才会部署到真正的生产环境，本来我们是有测试环境的，但现在给了编辑们使用后那个环境就变成生产环境了，不能轻易改动，但还有不少部署相关的东西需要开发、测试，比如我要完善备份过程，还有灾难恢复什么的。今天把原来的两个不用的lxc容器开起来了当staging环境来用。

部署staging的时候出现了不少奇怪问题，taowen说installer过程很脆弱，要重写，有些东西就收工fix掉，能正常使用就好了。没想到部署staging花去了很长时间，差不多三四点才正常使用。

明天就要加固backup过程了，相信不会特别容易。还有一些小问题需要fix，虽然不影响使用，但积少成多会很难对付。

wanglei爆了一个autocomplete的插件的漏洞——先隐藏autocomplete后显示出来，输入要查询的内容时候提示div会跑到（0，0）这个位置，加我去pair了一段时间一下子没思路，让他push了代码我回到自己座位上凭着猜测加测试，发现问题——隐藏后再显示出来没有重新获取DOM的positon，这样可能取到空，然后默认放到了（0，0），幸好liufan把autocomplete写得够模块化，在适当位置调用一下initUI()即可解决问题。但。。。在我push代码的时候发现branch出乱子了，真是奇怪。照这个情况看下去，很有必要买本Git书看看了！

临下班的时候eric部署了代码到最新的生产环境，同时也能测试一下长数据库连接问题有没有被真正修复，早晨一去应该就有答案了。
