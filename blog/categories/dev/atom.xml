<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: dev | dawncold's tech blog]]></title>
  <link href="http://www.youth2009.org/blog/categories/dev/atom.xml" rel="self"/>
  <link href="http://www.youth2009.org/"/>
  <updated>2013-05-11T16:26:09+08:00</updated>
  <id>http://www.youth2009.org/</id>
  <author>
    <name><![CDATA[dawncold]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[在MacOS上配置dnsmasq]]></title>
    <link href="http://www.youth2009.org/blog/2013/01/22/config-dnsmasq-on-macos/"/>
    <updated>2013-01-22T22:26:00+08:00</updated>
    <id>http://www.youth2009.org/blog/2013/01/22/config-dnsmasq-on-macos</id>
    <content type="html"><![CDATA[<p>最近那个伟大的墙把我们敬爱的git大神封锁了，无奈很多代码都托管在上面，其中也不乏很多商业项目。自己的几个blog也都放在上面，倒不是因为在那里免费，而是这已然已经成为程序员们的一种生活style。</p>

<p>ubuntu下有个dnsmasq可以连接别的dns，这样能够避免dns污染导致上不了github的问题。相关配置不算难，下面记录一下在MacOS下的dnsmasq配置方法。</p>

<p>1.使用brew安装dnsmasq</p>

<pre><code>brew install dnsmasq
</code></pre>

<p>2.修改一下dnsmasq的配置文件名字</p>

<pre><code>cp /usr/local/opt/dnsmasq/dnsmasq.conf.example /usr/local/etc/dnsmasq.conf
</code></pre>

<p>3.加入MacOS的启动项中</p>

<pre><code>sudo cp -fv /usr/local/opt/dnsmasq/*.plist /Library/LaunchDaemons
</code></pre>

<p>4.加载并启动dnsmasq，如果没有出现什么错误就开始配置dnsmasq</p>

<pre><code>sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plist
</code></pre>

<p>5.配置dnsmasq，把no-resolve的注释去掉，加入<code>server=xxx.xxx.xxx.xxx#nnnn</code></p>

<pre><code>mate /usr/local/etc/dnsmasq.conf

server的值可以从dns.v2ex.com中找到，“#”后面的是端口号，比如v2ex那个用3389
</code></pre>

<p>6.重启dnsmasq</p>

<pre><code>sudo launchctl stop homebrew.mxcl.dnsmasq
</code></pre>

<p>其实无需再执行<code>sudo launchctl start homebrew.mxcl.dnsmasq</code>这句了，因为你load了plist进去就已经启动了，如果此时stop的话会再自动start，所以没必要再start。要想关闭请使用unload（就修改上面的4即可）</p>

<p>7.把网络的dns设置成127.0.0.1，这样你才能用自己的dns服务</p>

<p>至此，我们的git大神就回归了。</p>
]]></content>
  </entry>
  
</feed>
