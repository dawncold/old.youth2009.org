<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 技术 | dawncold's tech blog]]></title>
  <link href="http://www.youth2009.org/blog/categories/ji-zhu/atom.xml" rel="self"/>
  <link href="http://www.youth2009.org/"/>
  <updated>2013-07-13T23:42:16+08:00</updated>
  <id>http://www.youth2009.org/</id>
  <author>
    <name><![CDATA[dawncold]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[我在考虑迁移到octopress上]]></title>
    <link href="http://www.youth2009.org/blog/2012/11/25/thinking-convert-to-octopress-blog-system/"/>
    <updated>2012-11-25T21:51:00+08:00</updated>
    <id>http://www.youth2009.org/blog/2012/11/25/thinking-convert-to-octopress-blog-system</id>
    <content type="html"><![CDATA[<p>最近的work@honovation博客一直是用octopress写的，就是直接写markdown内容即可，github负责转换并提供托管服务，而且可以自己绑定域名，比如现在的<a href="http://workathonovation.youth2009.org%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B9%88%E5%BC%84%E5%BE%97%EF%BC%8C%E9%9D%9E%E5%B8%B8%E7%AE%80%E6%B4%81%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E8%80%8C%E4%B8%94%E6%9C%89%E7%A7%8D%E5%9B%9E%E5%BD%92%E6%9C%AC%E7%9C%9F%E7%9A%84%E6%84%9F%E8%A7%89%E3%80%82">http://workathonovation.youth2009.org%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B9%88%E5%BC%84%E5%BE%97%EF%BC%8C%E9%9D%9E%E5%B8%B8%E7%AE%80%E6%B4%81%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E8%80%8C%E4%B8%94%E6%9C%89%E7%A7%8D%E5%9B%9E%E5%BD%92%E6%9C%AC%E7%9C%9F%E7%9A%84%E6%84%9F%E8%A7%89%E3%80%82</a></p>

<p>迟迟没有动作是因为我付了30刀个这个VPS，也就是到2月才过期，如果全部转到了octopress那么空着这个VPS干嘛？翻墙玩？呵呵，那真是无聊死了吧。。。说实在的，vps除了放个blog和自己做出来的小站外，好像就没什么用处了，但现在自己连小站都没有了，悉数关闭。。。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[pytz的6分钟时差]]></title>
    <link href="http://www.youth2009.org/blog/2012/10/20/6-minutes-offset-in-pytz/"/>
    <updated>2012-10-20T16:13:00+08:00</updated>
    <id>http://www.youth2009.org/blog/2012/10/20/6-minutes-offset-in-pytz</id>
    <content type="html"><![CDATA[<p>项目中有使用pytz这个第三方库来处理datetiem相关的东西。不过最近测试的时候发现，创建了一个时间点后，最终得到的时间点和预想的时间点有6分钟的误差，从网上搜到的资料是这样解决的：详情看<a href="http://hi.baidu.com/limodou/item/72da32384b25c7ff97f88df1">http://hi.baidu.com/limodou/item/72da32384b25c7ff97f88df1</a></p>

<p>创建datetime的时候，特别是带timezone，需要localize一下，否则在使用pytz的时候就会出现这6分钟的差异。代码中首先创建了datetime，然后localize后再replace了timezone为pytz的，最终还astimezone为pytz.utc。我们是使用utc的，你的代码也许不需要：）</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NAT实践]]></title>
    <link href="http://www.youth2009.org/blog/2012/10/09/nat-practical/"/>
    <updated>2012-10-09T14:09:00+08:00</updated>
    <id>http://www.youth2009.org/blog/2012/10/09/nat-practical</id>
    <content type="html"><![CDATA[<p>昨天用LXC建立了不少container，分别用来做webserver、databaseserver等等，让这些container运行着各自程序启动后如果有外部访问，就会通过iptables把请求发送到各自的地方，这里需要宿主机器做NAT。比如访问80端口，我会把请求转发到内部10.0.3.20这台container来处理，相应的response也会返回过去。这样就做到了服务隔离。</p>

<p><code>bash
sudo iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 80 -j DNAT --to 10.0.3.20
sudo iptables -t nat -A POSTROUTING -o eth1 -s 10.0.3.20 -j SNAT --to 200.200.200.25
</code></p>

<p>这样就把进入的请求都发到了10.0.3.20这台container上去处理。</p>

<p><img src="http://pic.yupoo.com/dawncold0/CkkIbzDr/medish.jpg" alt="nat" /></p>

<p>只默认开了一个nginx，就这样的效果。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC实践]]></title>
    <link href="http://www.youth2009.org/blog/2012/10/08/lxc-practical/"/>
    <updated>2012-10-08T20:46:00+08:00</updated>
    <id>http://www.youth2009.org/blog/2012/10/08/lxc-practical</id>
    <content type="html"><![CDATA[<p>这里的LXC是基于Ubuntu12.04的，在其他系统下可能不太一样。</p>

<p>0.安装lxc</p>

<p><code>bash
sudo apt-get install lxc
</code></p>

<p>1.修改lxc的mirror，不修改的话下载一个ubuntu景象会非常慢！！！</p>

<p><code>bash
sudo emacs /etc/default/lxc
第三行的mirror注释去掉，并修改为cn.archive.ubuntu.com，这样就非常快了
</code></p>

<p>2.创建lxc容器，t表示模板中的名字，n表示这个容器的名字（可自定义）</p>

<p><code>bash
sudo lxc-create -t ubuntu -n ubuntu_container
</code></p>

<p>3.启动容器</p>

<p><code>bash
sudo lxc-start -n ubuntu_container
</code></p>

<p>启动后就会出现登录ubuntu的界面，刚刚创建好容器后会给出一个提示，帐号密码都是ubuntu，登录进去就可以使用了。</p>

<p>猜想lxc的用法可能是对于部署的某个进程使用lxc隔离，这并不能做vps用，lxc只是轻量虚拟化，针对进程来的，所以还是单机在使用，如果做vps就得用vmware、xen、openvz这样的东西了。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LVM+RAID实践]]></title>
    <link href="http://www.youth2009.org/blog/2012/10/08/lvm-and-raid1/"/>
    <updated>2012-10-08T14:09:00+08:00</updated>
    <id>http://www.youth2009.org/blog/2012/10/08/lvm-and-raid1</id>
    <content type="html"><![CDATA[<p>两块256Gb SSD，做RAID1，用LVM管理，方便日后动态扩容等。</p>

<p>0.分区，因为是SSD，需要注意4K对齐问题，否则对SSD的寿命和性能有影响：</p>

<p><code>bash
fdisk /dev/sda
fdisk /dev/sdb
</code></p>

<p>1.创建PV</p>

<p><code>bash
sudo pvcreate /dev/sd{a1,b1}
</code></p>

<p>2.创建VG</p>

<p><code>bash
sudo vgcreate -s 16M vg0 /dev/sd{a1,b1}
</code></p>

<p>3.创建LV
<code>bash
sudo lvcreate -n lv0 vg0 -m 1 -lxxxx --corelog
</code></p>
]]></content>
  </entry>
  
</feed>
