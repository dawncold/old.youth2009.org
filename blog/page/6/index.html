
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>dawncold's tech blog</title>
  <meta name="author" content="dawncold">

  
  <meta name="description" content="刚刚翻了翻《Java核心技术》这本书，里面提到了swing中的Timer的用法，我就实践一下，结果发现根本没有反映，于是网上搜索答案，在stackoverflow中找到。 我写的测试是每秒输出现在的时间而已。 import java.awt.Toolkit;
import java.awt. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.youth2009.org/blog/page/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="dawncold's tech blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8650400-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.youth2009.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul>
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/02/method-timer-in-swing-is-better-in-gui/">swing中的Timer还是用在GUI中的好</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-02T09:23:00+08:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>刚刚翻了翻《Java核心技术》这本书，里面提到了swing中的Timer的用法，我就实践一下，结果发现根本没有反映，于是网上搜索答案，在stackoverflow中找到。</p>

<p>我写的测试是每秒输出现在的时间而已。</p>

<pre class="prettyprint linenums bush:java" lang="java">import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Date;


public class TimePrint implements ActionListener
{

   @Override
   public void actionPerformed(ActionEvent e)
   {
       // TODO Auto-generated method stub
       System.out.println("date is: " + (new Date()));
       Toolkit.getDefaultToolkit().beep();
   }
}
</pre>


<p>在调用的时候如果忘记写Thread.sleep(xxx)这行就不会看到效果，具体原因不太清楚，可能这个swing中的Timer只是用来在GUI中做些什么工作的，而我用终端输出内容就不太合适了，于是就牵扯出来很多线程的问题。</p>

<p>这是main方法中的内容：</p>

<pre class="prettyprint linenums bush:bash" lang="bash">import java.awt.event.ActionListener;

import javax.swing.Timer;


public class TimerPrintTest
{
   public static void main(String[] argStrings) throws InterruptedException
   {
       System.out.println("Running...");
       ActionListener listener = new TimePrint();
       Timer timer = new Timer(1000, listener);
       timer.start();
       Thread.sleep(4000);
   }
}
</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/30/simple-c-language-program/">一个简单的C程序</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-30T19:39:00+08:00" pubdate data-updated="true">May 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>嗯，我是一直喜欢C的，不过没勇气说我从事C方面的开发，因为C是需要很多技巧和底层技术的，我自知这方面的能力不足：（</p>

<pre class="prettyprint linenums bush:c" lang="c">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;

void strcp(char*, char*);
int main()
{
char* s = "test string...";
char* t = malloc(strlen(s));
strcp(t, s);
printf("%s\n", t);
free(t);

return 0;
}

void strcp(char *s,char *t)  
{  
while(*s++ = *t++);  
}</pre>


<p>最漂亮的就是那句strcp的函数了，非常简洁好用：）</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/30/2012-astar-qualification-match/">2012Astar资格赛</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-30T12:09:00+08:00" pubdate data-updated="true">May 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>其实挺那啥的，那啥呢？说不出来感受，些须高兴又些须失望。</p>

<p>资格赛10个题，仔细一看才知道是POJ的原题，随便找了10个，有简单到算a+b结果的，也有复杂点用动态规划、解方程组的等等。总之和大多数人一样，比较失望。</p>

<p>虽然ac了10个，现在排名88，不过都直到答案网上有的是，自己找来不就可以了么，这样的资格赛有啥意思，难道这不就是随便让人们来参加的么？</p>

<p>现在一想这和GoogleCodeJam的资格赛相比，真是差别很大，相当的大呀~</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/30/test-the-performace-of-vps-using-unixbench/">用UnixBench测试VPS性能</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-30T12:02:00+08:00" pubdate data-updated="true">May 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>本来就想测试一下性能的，不过中途遇到点问题。</p>

<p>UnixBench用了perl，但不知道为何我的VPS对perl似乎不太友好，提示有几个关键的moudle找不到，于是无法测试了，根据提示我需要安装Time::HiRes这个module。</p>

<p>听说perl5之后有了一个module管理器，叫CPAN（C盘？），就和yum这样的工具一样可以随意安装module，确实方便，可以和python的pip啊easy_install这样的工具媲美。</p>

<p>但我在使用CPAN的时候发现连这个module都没有…………于是去CPAN.org这里搜索下载这个基础module，但在makefile的时候（用perl做makefile），发现又缺少一个module，看来这个更加底层。从网上找到方法说用yum进行安装，于是用yum -y install perl-CPAN，这样就能用了：）</p>

<p>在安装Time::HiRes的时候发现找不到install工具………………天啊，又去了CPAN.org下载了这个module的源码，自己编译安装上了，这样就没问题了：）</p>

<p>VPS的得分稍后更新：）</p>

<p>UPDATE:</p>

<pre class="prettyprint linenums bush:bash" lang="bash">Benchmark Run: 三  5月 30 2012 11:38:34 - 12:06:53
1 CPU in system; running 1 parallel copy of tests

Dhrystone 2 using register variables       12579232.4 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                     2268.2 MWIPS (10.3 s, 7 samples)
Execl Throughput                               1140.1 lps   (29.6 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks        270525.4 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks           77911.8 KBps  (30.1 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks        709368.9 KBps  (30.0 s, 2 samples)
Pipe Throughput                              394585.6 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                  40293.3 lps   (10.0 s, 7 samples)
Process Creation                               1908.7 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                   1539.5 lpm   (60.0 s, 2 samples)
Shell Scripts (8 concurrent)                    204.1 lpm   (60.1 s, 2 samples)
System Call Overhead                         525047.2 lps   (10.0 s, 7 samples)

System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   12579232.4   1077.9
Double-Precision Whetstone                       55.0       2268.2    412.4
Execl Throughput                                 43.0       1140.1    265.1
File Copy 1024 bufsize 2000 maxblocks          3960.0     270525.4    683.1
File Copy 256 bufsize 500 maxblocks            1655.0      77911.8    470.8
File Copy 4096 bufsize 8000 maxblocks          5800.0     709368.9   1223.0
Pipe Throughput                               12440.0     394585.6    317.2
Pipe-based Context Switching                   4000.0      40293.3    100.7
Process Creation                                126.0       1908.7    151.5
Shell Scripts (1 concurrent)                     42.4       1539.5    363.1
Shell Scripts (8 concurrent)                      6.0        204.1    340.2
System Call Overhead                          15000.0     525047.2    350.0
                                                                  ========
System Benchmarks Index Score                                         382.2</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/23/new-input-method-on-mac-rimeime/">新的输入法测试</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-23T20:29:00+08:00" pubdate data-updated="true">May 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>mac下的输入法一直让我耿耿于怀，官方的输入法就不多说了，基本不会去用，虽然UI做得不错，没用几分钟就再也不使用了。</p>

<p>然后使用了搜狗输入法，词汇量真的很大，这个和Windows平台的积累密不可分，但是我使用的时候搜狗输入法for mac的刚刚开始测试，bug比较多，渐渐被QQ输入法赶上了。</p>

<p>QQ输入法用了很久，不过偶尔出现打字时候卡死的情况，其他没啥问题，我就以为是我自己的问题吧，刚刚在微博上搜索了一下，不少用户都遇到这样的问题，搜狗那边也是如此，这就很奇怪了。。。</p>

<p>有位朋友推荐了rimeime输入法，正在使用中，看这个反应速度很满意，听说是用配置文件可以做出很玄的样子，暂时不去研究这些，能保证不卡就是很好的进步，如果可以的话，果断放弃掉其他输入法！！！</p>

<p>希望rimeime能够把中英文切换状态在growl中体现出来，起码也该给一个提醒：）</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/23/two-mysql-lib-issue-after-yum-update/">Ldconfig: /usr/lib/libmysqlclient.so.16 Is Not a Symbolic Link的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-23T19:50:00+08:00" pubdate data-updated="true">May 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>刚刚用yum升级了系统，发现日志中有很多这样的提示：</p>

<p><span style="color: #111111; font-family: 微软雅黑, Arial, Helvetica, sans-serif; font-size: 12px; line-height: 20px; text-align: left;">ldconfig: /usr/lib/libmysqlclient.so.16 is not a symbolic link</span></p>

<p><span style="color: #111111; font-family: 微软雅黑, Arial, Helvetica, sans-serif; font-size: 12px; line-height: 20px; text-align: left;">ldconfig: /usr/lib/libmysqlclient_r.so.16 is not a symbolic link</span></p>

<p>于是Google了一下，找到一个解决方法，在<a href="http://tiger.im/286.html" target="_blank">这里</a>.</p>

<p>就是重建了两条连接过去即可：</p>

<pre class="prettyprint linenums bush:bash" lang="bash">ln -sf /usr/local/mysql/lib/mysql/libmysqlclient.so.16 /usr/lib/mysqlclient.so.16
ln -sf /usr/local/mysql/lib/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/23/optimize-my-vps/">优化了一下VPS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-23T15:30:00+08:00" pubdate data-updated="true">May 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一开始玩VPS的时候跟着网上的各种优化教程做了很多工作，中途重装了一次系统后什么优化工作都没做，基本就和裸奔一样啦，还有次好奇怪的突发事件，让我以为是hacker进来了，但后来又不了了之了。</p>

<p>今天把ssh的端口改掉了，加入iptables各种规则，希望这样能让vps的uptime提升一下，现在不清楚是不是做了这些工作就有好处，但总归是没有坏处的。</p>

<p>在dnspod上开启了一个宕机监控，同时把监控宝上的ping测试改掉了，因为现在不允许ping了～就这样监控一段时间试试效果吧，如果真有用的话我就一定要每次重装os后都做！！！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/22/little-cheat-for-game/">小作弊玩游戏</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-22T23:31:00+08:00" pubdate data-updated="true">May 22<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>有这么一个小游戏，按照顺序输入字母表的26个英文字母，看看你输入的总时间是多少。有个变态的人竟然在2s内就输入了26个字母，而且不允许有任何错误，真心佩服！！！</p>

<p>我试了试，快的话我只能在6s左右完成，根本上不了排行榜，于是我考虑作弊……</p>

<pre class="prettyprint linenums bush:bash" lang="bash">tell application "Google Chrome"
activate
repeat with i from 0 to 25
delay 0.04
tell application "System Events"
keystroke (ASCII character of (97 + i))
end tell
end repeat
end tell</pre>


<p>不减速的话系统根本无法记录，所以还是减速了，这个速度正好拿到第一名的位置，OK，剩下的让人去羡慕吧！！！</p>

<p>感谢Apple提供的AppleScript这样优秀的脚本工具～</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/14/left-outer-join-and-multiply-select-in-sqlite3/">Sqlite3连接查询和多次select的对比</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-14T23:23:00+08:00" pubdate data-updated="true">May 14<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>通过todo_meta把todo和user联系起来，要查出userid为0～6的所有todo。随机了10W条todo数据进去。</p>

<p>左外连接查询比两次select快10～20%左右。</p>

<pre class="prettyprint linenums bush:python" lang="python">#! /usr/bin/env python
# coding: utf-8

import sqlite3
import os
import time
import random

def connect():
return sqlite3.connect('./test.db')


def insertProgress(conn, user_id):
cur = conn.execute('INSERT INTO todo(title, date) VALUES(?,?)', ['just test!!!', time.strftime("%Y-%m-%d %H:%M:%S", time.localtime())])
conn.execute('INSERT INTO todo_meta(todo_id, user_id) VALUES(?,?)', [cur.lastrowid, user_id])


def insertManyData(conn):
#reset database
os.system('sqlite3 test.db &lt; schema.sql')

conn.cursor()
counts = [0,0,0,0,0,0]
for i in xrange(100000):
userid = random.choice([0, 1, 2, 3, 4, 5])
counts[userid] += 1
insertProgress(conn, userid)
conn.commit()
conn.close()
print counts

def selectUsingLeftOuterJoin(conn, user_id):
conn.cursor()
cur = conn.execute('SELECT t.title, t.date \
FROM todo t LEFT OUTER JOIN todo_meta tm \
ON tm.todo_id = t.id\WHERE tm.user_id = ?', [user_id])
def selectTwoTimes(conn, user_id):
conn.cursor()
cur = conn.execute('SELECT todo_id FROM todo_meta WHERE user_id = ?', [user_id])
for tid in [row[0] for row in cur.fetchall()]:
cur = conn.execute('SELECT title, date FROM todo WHERE id = ?', [tid])

if __name__ == "__main__":
uids = [0, 1, 2, 3, 4, 5]
insert_time_start = time.time()
insertManyData(connect())
print "Insert Time: %f" % (time.time() - insert_time_start)
select_ULOJ_start = time.time()
for uid in uids:
selectUsingLeftOuterJoin(connect(), uid)
print "Select Using Left Outer Join time: %f" % (time.time() - select_ULOJ_start)
select_two_times = time.time()
for uid in uids:
selectTwoTimes(connect(), uid)
print "Select Two Times time: %f" % (time.time() - select_two_times)</pre>


<p>schema：</p>

<pre class="prettyprint linenums bush:sql" lang="sql">drop table if exists todo;
drop table if exists user;
drop table if exists todo_meta;
create table todo (
id integer primary key autoincrement,
title string not null,
date datetime not null
);
create table user (
id integer primary key autoincrement,
email string not null,
password string not null,
nickname string not null,
salt string not null
);
create table todo_meta (
todo_id integer,
user_id integer,
foreign key(todo_id) references todo(id),
foreign key(user_id) references user(id)
);</pre>


<p>启动脚本就会创建数据库并开始测试。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/14/the-rowcount-of-cursor-in-sqlite3/">Sqlite3的rowcount</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-14T17:00:00+08:00" pubdate data-updated="true">May 14<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近写了一个todo的webapp，在用户登陆的时候是select数据库中的内容进行对比判断，当然如果select的内容是0那就表示用户登陆失败了，可能账号或者密码写错了，数据库用的sqlite3，在python的api中发现有cursor.rowcount可用，于是就这么判断一下是不是有数据被select出来了，没想到这样判断是错误的。</p>

<p>select的rowcount永远为-1，哎，这里着实坑了我一番啊～</p>

<p>只好cursor.fetchone()先，然后判断得到的内容是不是None。</p>

<p>从<a href="http://stackoverflow.com/questions/839069/cursor-rowcount-always-1-in-sqlite3-in-python3k" target="_blank">这里</a>得到的答案。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/7/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/04/build-4pm-env/">搭建4pm.la的数据库服务器</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/25/nginx-upload-file-without-backend/">Nginx-upload-file-without-backend</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/15/some-sed-work/">Some-sed-work</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/18/dog-pile-effect/">Dog-pile-effect</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/11/ssh-proxy-with-autossh/">Ssh-proxy-with-autossh-in-mac</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>&copy; 2013 dawncold</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dawncoldtechblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










</body>
</html>
