
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>dawncold's tech blog</title>
  <meta name="author" content="dawncold">

  
  <meta name="description" content="&lt;p&gt;刚拿到vps，打算更新一些软件，发现有些warning挺讨厌的，于是就想根除他们！！他们一般是这样的：&lt;/p&gt; locale: Cannot set LC_CTYPE to default locale: No such file or directory &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.youth2009.org/blog/page/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="dawncold's tech blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8650400-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">dawncold's tech blog</a></h1>
  
    <h2>dawncold's tech blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.youth2009.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  	<li><a href="/">Blog</a></li>
  	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/08/solved-set-lc_ctype-to-default-locale-no-such-file-or-directory/">解决Cannot Set LC_CTYPE to Default Locale: No Such File or Directory问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-08T16:20:00+08:00" pubdate data-updated="true">Jun 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;刚拿到vps，打算更新一些软件，发现有些warning挺讨厌的，于是就想根除他们！！他们一般是这样的：&lt;/p&gt;
</code></pre>

<br /><pre class="prettyprint linenums bush:bash" lang="bash">locale: Cannot set LC_CTYPE to default locale: No such file or directory


<p>locale: Cannot set LC_MESSAGES to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory</pre></p>

<br /><p>我看到我的LANG被设定为zh_CN.utf8，虽然我们是国人，但这个语言习惯不能代表我们的爱国情怀吧，我就改为en_US.utf8了：</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">sudo touch /etc/default/locale


<p>vi /etc/default/locale</pre></p>

<br /><p>加入：</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">LANG="en_US.UTF-8"


<p>LANGUAGE="en_US:en"</pre></p>

<br /><p>再执行一下locale就发现问题不见了。</p>


<p>希望vpsee的admin能在iso中修正这个事儿～</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/08/security-of-ssh/">Ssh的安全配置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-08T16:11:00+08:00" pubdate data-updated="true">Jun 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;今天刚刚换了vps，ssh的安全早就该配置好，没想到竟然是现在了……&lt;/p&gt;
</code></pre>

<p>首先这些基本需要做：<a href="http://www.deepvps.com/improve-ssh-security.html">http://www.deepvps.com/improve-ssh-security.html</a></p>


<p>再就是禁止root后需要创建一个马甲账号：</p>


<p> </p>


<p>0.增加ubuntu的admin组，我的vps默认没有，所以就创建了，sudoer文件中写明了admin组可以用sudo，所以我省略了这一步</p>


<p> </p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">groupadd admin</pre>


<br /><p>1.增加马甲账号(-m表示创建home目录，-s表示后面跟着的是terminal，-G表示加入后面的那个组，最后的USERNAME各位自己发挥)</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">useradd -m -s /bin/bash -G admin USERNAME</pre>


<br /><p>2.修改刚刚马甲的密码：(输入两次新密码就ok了)</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">passwd USERNAME</pre>


<br /><p>＃＃＃＃＃＃＃＃＃＃＃禁止root登陆＃＃＃＃＃＃＃＃＃＃＃</p>


<p>下面禁止root登陆，直接修改/etc/ssh/sshd_config中的PermitRootLogin为no即可，然后重启ssh：</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">service ssh restart


<p></pre></p>

<br /><p>不放心的可以断开ssh连接用root和刚刚的马甲账号登陆试试看，肯定root不能用了，而且用马甲登陆上去之后你可以“su -”一下，输入root的密码后就切换到了root的环境下了（不要忘记su后面的短横杠哦，那样才切换环境）。</p>


<p> </p>


<p> </p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/08/very-long-offline-of-my-vps-in-yardvps/">超长宕机</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-08T13:51:00+08:00" pubdate data-updated="true">Jun 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;这次宕机持续了1天零13小时，具体什么原因不清楚，yardvps那边说ip自动归零，这是什么原因？！反正我是不清楚怎么回事了，而且买了vpsee的vps，正考虑着是依然延续lnmp的架构还是自己整一套lnmp+python的架构，这样方便以后自己用python做webapp，嗯，先睡觉，起来再搞新的vps吧！！！&lt;/p&gt;
</code></pre>

<p>UPDATE:我没有睡觉……</p>


<p>yardvps给我的回复是这样的——“It&#8217;s nulled by PPS (Packet Per Second) Once it exceeds the thresholds and simulates a DDOS attack our system automatically nulls your IP within seconds.”</p>


<p>看来是我被攻击了？！好奇怪！！！反正我用着vpsee的vps很爽，不出问题就不再用yardvps了！</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/05/solved-mysql-refuse-localhost-connection/">mysql只允许127.0.0.1连接的解决方法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-05T10:30:00+08:00" pubdate data-updated="true">Jun 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;我上次记录过一次这样的情况，突然间所有的php应用无法连接数据库了，但可惜我忘记是为何导致了这样的结果，总是有很多奇怪的地方在这个vps上发生，比如有次突然在某个app中出现了嵌入的广告，这个app可是我写的呀，怎么会有广告？！还有就是那次mysql突然无法连接了，最后用127.0.0.1代替了localhost。&lt;/p&gt;
</code></pre>

<p>昨晚国庆安装了织梦的后台，但提示无法使用数据库，由于昨天太晚了没有深入研究，早晨起来看了一下，有人说去查看data/common.inc.php文件中的信息，我去看了一下，突然想起来localhost不能用了，于是改为127.0.0.1就可以了，但这也只是缓兵之计，于是想办法解决！</p>


<p>解决方法也不尽相同，就是在php.ini中的三处添加“/tmp/mysql.sock”，那三处就是：mysql.default_socket、mysqli.default_socket、pdo_mysql.default_socket，看名字就是php连接mysql的三种方法的默认socket路径，原来我就修改了两处，漏掉了mysqli这种，结果现在不少程序都是用这种方式连接，比如phpmyadmin和织梦，所以呢，修改了这三处就ok了（当然你得确定你用socket这种方式连接）</p>


<p>至此我的phpmyadmin也可以用socket登录了，织梦也能访问数据库了，再也不用127.0.0.1啦~</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/02/method-timer-in-swing-is-better-in-gui/">swing中的Timer还是用在GUI中的好</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-02T09:23:00+08:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;刚刚翻了翻《Java核心技术》这本书，里面提到了swing中的Timer的用法，我就实践一下，结果发现根本没有反映，于是网上搜索答案，在stackoverflow中找到。&lt;/p&gt;
</code></pre>

<p>我写的测试是每秒输出现在的时间而已。</p>


<br /><pre class="prettyprint linenums bush:java" lang="java">import java.awt.Toolkit;


<p>import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Date;</p>

<p>public class TimePrint implements ActionListener
{</p>

<pre><code>@Override
public void actionPerformed(ActionEvent e)
{
    // TODO Auto-generated method stub
    System.out.println("date is: " + (new Date()));
    Toolkit.getDefaultToolkit().beep();
}
</code></pre>

<p>}
</pre></p>

<br /><p>在调用的时候如果忘记写Thread.sleep(xxx)这行就不会看到效果，具体原因不太清楚，可能这个swing中的Timer只是用来在GUI中做些什么工作的，而我用终端输出内容就不太合适了，于是就牵扯出来很多线程的问题。</p>


<p>这是main方法中的内容：</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">import java.awt.event.ActionListener;


<p>import javax.swing.Timer;</p>

<p>public class TimerPrintTest
{</p>

<pre><code>public static void main(String[] argStrings) throws InterruptedException
{
    System.out.println("Running...");
    ActionListener listener = new TimePrint();
    Timer timer = new Timer(1000, listener);
    timer.start();
    Thread.sleep(4000);
}
</code></pre>

<p>}
</pre></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/30/simple-c-language-program/">一个简单的C程序</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-30T19:39:00+08:00" pubdate data-updated="true">May 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;嗯，我是一直喜欢C的，不过没勇气说我从事C方面的开发，因为C是需要很多技巧和底层技术的，我自知这方面的能力不足：（&lt;/p&gt;
</code></pre>

<br /><pre class="prettyprint linenums bush:c" lang="c">#include &lt;stdio.h&gt;


<h1>include &lt;string.h&gt;</h1>

<h1>include &lt;stdlib.h&gt;</h1>

<p>void strcp(char<em>, char</em>);
int main()
{</p>

<pre><code>char* s = "test string...";
char* t = malloc(strlen(s));
strcp(t, s);
printf("%s\n", t);
free(t);

return 0;
</code></pre>

<p>}</p>

<p>void strcp(char <em>s,char </em>t)<br/>
{<br/>
while(<em>s++ = </em>t++);<br/>
}</pre></p>

<br /><p>最漂亮的就是那句strcp的函数了，非常简洁好用：）</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/30/2012-astar-qualification-match/">2012Astar资格赛</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-30T12:09:00+08:00" pubdate data-updated="true">May 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;其实挺那啥的，那啥呢？说不出来感受，些须高兴又些须失望。&lt;/p&gt;
</code></pre>

<p>资格赛10个题，仔细一看才知道是POJ的原题，随便找了10个，有简单到算a+b结果的，也有复杂点用动态规划、解方程组的等等。总之和大多数人一样，比较失望。</p>


<p>虽然ac了10个，现在排名88，不过都直到答案网上有的是，自己找来不就可以了么，这样的资格赛有啥意思，难道这不就是随便让人们来参加的么？</p>


<p>现在一想这和GoogleCodeJam的资格赛相比，真是差别很大，相当的大呀~</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/30/test-the-performace-of-vps-using-unixbench/">用UnixBench测试VPS性能</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-30T12:02:00+08:00" pubdate data-updated="true">May 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;本来就想测试一下性能的，不过中途遇到点问题。&lt;/p&gt;
</code></pre>

<p>UnixBench用了perl，但不知道为何我的VPS对perl似乎不太友好，提示有几个关键的moudle找不到，于是无法测试了，根据提示我需要安装Time::HiRes这个module。</p>


<p>听说perl5之后有了一个module管理器，叫CPAN（C盘？），就和yum这样的工具一样可以随意安装module，确实方便，可以和python的pip啊easy_install这样的工具媲美。</p>


<p>但我在使用CPAN的时候发现连这个module都没有…………于是去CPAN.org这里搜索下载这个基础module，但在makefile的时候（用perl做makefile），发现又缺少一个module，看来这个更加底层。从网上找到方法说用yum进行安装，于是用yum -y install perl-CPAN，这样就能用了：）</p>


<p>在安装Time::HiRes的时候发现找不到install工具………………天啊，又去了CPAN.org下载了这个module的源码，自己编译安装上了，这样就没问题了：）</p>


<p>VPS的得分稍后更新：）</p>


<p>UPDATE:</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">Benchmark Run: 三  5月 30 2012 11:38:34 - 12:06:53


<p>1 CPU in system; running 1 parallel copy of tests</p>

<p>Dhrystone 2 using register variables       12579232.4 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                     2268.2 MWIPS (10.3 s, 7 samples)
Execl Throughput                               1140.1 lps   (29.6 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks        270525.4 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks           77911.8 KBps  (30.1 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks        709368.9 KBps  (30.0 s, 2 samples)
Pipe Throughput                              394585.6 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                  40293.3 lps   (10.0 s, 7 samples)
Process Creation                               1908.7 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                   1539.5 lpm   (60.0 s, 2 samples)
Shell Scripts (8 concurrent)                    204.1 lpm   (60.1 s, 2 samples)
System Call Overhead                         525047.2 lps   (10.0 s, 7 samples)</p>

<p>System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   12579232.4   1077.9
Double-Precision Whetstone                       55.0       2268.2    412.4
Execl Throughput                                 43.0       1140.1    265.1
File Copy 1024 bufsize 2000 maxblocks          3960.0     270525.4    683.1
File Copy 256 bufsize 500 maxblocks            1655.0      77911.8    470.8
File Copy 4096 bufsize 8000 maxblocks          5800.0     709368.9   1223.0
Pipe Throughput                               12440.0     394585.6    317.2
Pipe-based Context Switching                   4000.0      40293.3    100.7
Process Creation                                126.0       1908.7    151.5
Shell Scripts (1 concurrent)                     42.4       1539.5    363.1
Shell Scripts (8 concurrent)                      6.0        204.1    340.2
System Call Overhead                          15000.0     525047.2    350.0</p>

<pre><code>                                                               ========
</code></pre>

<p>System Benchmarks Index Score                                         382.2</pre></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/23/new-input-method-on-mac-rimeime/">新的输入法测试</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-23T20:29:00+08:00" pubdate data-updated="true">May 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;mac下的输入法一直让我耿耿于怀，官方的输入法就不多说了，基本不会去用，虽然UI做得不错，没用几分钟就再也不使用了。&lt;/p&gt;
</code></pre>

<p>然后使用了搜狗输入法，词汇量真的很大，这个和Windows平台的积累密不可分，但是我使用的时候搜狗输入法for mac的刚刚开始测试，bug比较多，渐渐被QQ输入法赶上了。</p>


<p>QQ输入法用了很久，不过偶尔出现打字时候卡死的情况，其他没啥问题，我就以为是我自己的问题吧，刚刚在微博上搜索了一下，不少用户都遇到这样的问题，搜狗那边也是如此，这就很奇怪了。。。</p>


<p>有位朋友推荐了rimeime输入法，正在使用中，看这个反应速度很满意，听说是用配置文件可以做出很玄的样子，暂时不去研究这些，能保证不卡就是很好的进步，如果可以的话，果断放弃掉其他输入法！！！</p>


<p>希望rimeime能够把中英文切换状态在growl中体现出来，起码也该给一个提醒：）</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/23/two-mysql-lib-issue-after-yum-update/">Ldconfig: /usr/lib/libmysqlclient.so.16 Is Not a Symbolic Link的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-23T19:50:00+08:00" pubdate data-updated="true">May 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>        &lt;p&gt;刚刚用yum升级了系统，发现日志中有很多这样的提示：&lt;/p&gt;
</code></pre>

<p><span style="color: #111111; font-family: 微软雅黑, Arial, Helvetica, sans-serif; font-size: 12px; line-height: 20px; text-align: left;">ldconfig: /usr/lib/libmysqlclient.so.16 is not a symbolic link</span></p>


<p><span style="color: #111111; font-family: 微软雅黑, Arial, Helvetica, sans-serif; font-size: 12px; line-height: 20px; text-align: left;">ldconfig: /usr/lib/libmysqlclient_r.so.16 is not a symbolic link</span></p>


<p>于是Google了一下，找到一个解决方法，在<a href="http://tiger.im/286.html" target="_blank">这里</a>.</p>


<p>就是重建了两条连接过去即可：</p>


<br /><pre class="prettyprint linenums bush:bash" lang="bash">ln -sf /usr/local/mysql/lib/mysql/libmysqlclient.so.16 /usr/lib/mysqlclient.so.16


<p>ln -sf /usr/local/mysql/lib/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16</pre></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/20/merge-partition-got-couldnt-modify-partition-map-because-file-system-verification-failed-error/">merge partition got Couldn’t modify partition map because file system verification failed error</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/03/gets-method-in-ruby/">gets method in ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/01/some-ruby-study-log/">Ruby学习记录</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/19/make-a-contribution-to-open-source-project/">给开源项目做贡献了</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/25/thinking-convert-to-octopress-blog-system/">我在考虑迁移到octopress上</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - dawncold -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dawncoldtechblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
