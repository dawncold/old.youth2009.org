<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Trade Off]]></title>
  <link href="http://www.youth2009.org/www/atom.xml" rel="self"/>
  <link href="http://www.youth2009.org/www/"/>
  <updated>2014-06-01T13:19:40+08:00</updated>
  <id>http://www.youth2009.org/www/</id>
  <author>
    <name><![CDATA[dawncold]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[postgresql indexes]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/06/01/postgresql-indexes/"/>
    <updated>2014-06-01T10:18:27+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/06/01/postgresql-indexes</id>
    <content type="html"><![CDATA[<h1>Introduction</h1>

<p>Indexes will speed up your read(SELECT) and write(INSERT, UPDATE, DELETE) operation on a table, but they should by removed when a query seldom or never used. Create a bit table&rsquo;s index will spend lot of time. By default, PostgreSQL allows reads (SELECT statements) to occur on the table in parallel with index creation, but writes (INSERT, UPDATE, DELETE) are blocked until the index build is finished. In production environments this is often unacceptable. It is possible to allow writes to occur in parallel with index creation, but there are several caveats to be aware of — for more information see <a href="http://www.postgresql.org/docs/9.3/static/sql-createindex.html#SQL-CREATEINDEX-CONCURRENTLY">Building Indexes Concurrently</a>.</p>

<h1>Index Types</h1>

<p>PostgreSQL provides several index types: B-tree, Hash, GiST, SP-GiST and GIN. By default, the CREATE INDEX command creates B-tree indexes, which fit the most common situations.</p>

<h1>Multicolumn index</h1>

<p>Currently, only the B-tree, GiST and GIN index types support multicolumn indexes. Up to 32 columns can be specified. (This limit can be altered when building PostgreSQL; see the file pg_config_manual.h.)</p>

<p>if your frequently query is like this: <code>SELECT name FROM test2 WHERE major = constant AND minor = constant;</code>, your need create an index on table test2 with <code>major</code>, <code>minor</code> columns: <code>CREATE INDEX test2_mm_idx ON test2 (major, minor);</code></p>

<p>The order is important in multicolumn index:</p>

<blockquote><p>A multicolumn B-tree index can be used with query conditions that involve any subset of the index&rsquo;s columns, but the index is most efficient when there are constraints on the leading (leftmost) columns. The exact rule is that equality constraints on leading columns, plus any inequality constraints on the first column that does not have an equality constraint, will be used to limit the portion of the index that is scanned. Constraints on columns to the right of these columns are checked in the index, so they save visits to the table proper, but they do not reduce the portion of the index that has to be scanned. For example, given an index on (a, b, c) and a query condition WHERE a = 5 AND b >= 42 AND c &lt; 77, the index would have to be scanned from the first entry with a = 5 and b = 42 up through the last entry with a = 5. Index entries with c >= 77 would be skipped, but they&rsquo;d still have to be scanned through. This index could in principle be used for queries that have constraints on b and/or c with no constraint on a — but the entire index would have to be scanned, so in most cases the planner would prefer a sequential table scan over using the index.</p></blockquote>

<h1>Order By</h1>

<p>By default, B-tree indexes store their entries in ascending order with nulls last.</p>

<h1>Combining Multiple Indexes</h1>

<p>little difficult just trade off to decide which indexes to provide. Sometimes multicolumn indexes are best, but sometimes it&rsquo;s better to create separate indexes and rely on the index-combination feature.</p>

<h1>Index on Expressions</h1>

<p>This kind of index, not a specific column, it&rsquo;s an expression: <code>CREATE INDEX people_names ON people ((first_name || ' ' || last_name));</code></p>

<h1>Partial Index</h1>

<p><code>CREATE INDEX idx_xxx ON table(name) WHERE NOT deleted</code> this index only enables to rows which deleted is <code>TRUE</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[python-main-py]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/05/30/python-main-py/"/>
    <updated>2014-05-30T21:05:20+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/05/30/python-main-py</id>
    <content type="html"><![CDATA[<p>python的<code>__main__.py</code>文件，通常，一个package下有一个<code>__init__.py</code>文件标识这是package，同样可以有一个<code>__main__.py</code>文件，有了后你就可以这样运行一个脚本：<code>python script_dir</code>或者把这个dir打包成zip，可以使用<code>python zipball.zip</code>来执行，python会执行<code>__main__.py</code>中的语句。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[disable-keyboard-on-ubuntu]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/05/30/disable-keyboard-on-ubuntu/"/>
    <updated>2014-05-30T20:54:45+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/05/30/disable-keyboard-on-ubuntu</id>
    <content type="html"><![CDATA[<p>有时候不接外置显示器的时候，喜欢把键盘压在笔记本键盘上方使用，但如果不禁用内置键盘的话就会有误操作的风险，所以这样做，利用ubuntu中的xinput</p>

<p>查看设备使用<code>xinput list</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>⎡ Virtual core pointer                      <span class="nv">id</span><span class="o">=</span>2    <span class="o">[</span>master pointer  <span class="o">(</span>3<span class="o">)]</span>
</span><span class='line'>⎜   ↳ Virtual core XTEST pointer                <span class="nv">id</span><span class="o">=</span>4    <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
</span><span class='line'>⎜   ↳ SynPS/2 Synaptics TouchPad                <span class="nv">id</span><span class="o">=</span>11   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
</span><span class='line'>⎜   ↳ Logitech USB-PS/2 Optical Mouse           <span class="nv">id</span><span class="o">=</span>12   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
</span><span class='line'>⎜   ↳ Logitech Unifying Device. Wireless PID:4004   <span class="nv">id</span><span class="o">=</span>13   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
</span><span class='line'>⎣ Virtual core keyboard                     <span class="nv">id</span><span class="o">=</span>3    <span class="o">[</span>master keyboard <span class="o">(</span>2<span class="o">)]</span>
</span><span class='line'>    ↳ Virtual core XTEST keyboard               <span class="nv">id</span><span class="o">=</span>5    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
</span><span class='line'>    ↳ Power Button                              <span class="nv">id</span><span class="o">=</span>6    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
</span><span class='line'>    ↳ Video Bus                                 <span class="nv">id</span><span class="o">=</span>7    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
</span><span class='line'>    ↳ Sleep Button                              <span class="nv">id</span><span class="o">=</span>8    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
</span><span class='line'>    ↳ Acer CrystalEye webcam                    <span class="nv">id</span><span class="o">=</span>9    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
</span><span class='line'>    ↳ AT Translated Set 2 keyboard              <span class="nv">id</span><span class="o">=</span>10   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
</span></code></pre></td></tr></table></div></figure>


<p>找到内置键盘，我这里是那个叫&#8221;AT Translated Set 2 keyboard&#8221;的，id是10，禁用使用：<code>xinput float 10</code></p>

<p>如果再启用使用<code>xinput reattach 10 3</code>，3标识这个设备的master的id，从list的结果很容易看到从属关系。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[log2n和log3n]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/05/30/log2n-log3n/"/>
    <updated>2014-05-30T20:45:44+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/05/30/log2n-log3n</id>
    <content type="html"><![CDATA[<p>merge sort的时间复杂度，log2n，曾经在算法书上看到过，相应的，merge sort也可以三分，复杂度变成log3n，好像还不错，但差多少呢？</p>

<p>log3n=log2n/log2(3)，也就是只差了1/log2(3)对于看起来还更大。一般算法复杂度是log2n表示就是这个原因，loga(n)和log2n差不了太多，都是常数级别的差距，而且在复杂度分析的时候都会忽略常数，所以就简记为log2n复杂度了：）</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[md5 digest]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/05/30/md5-digest/"/>
    <updated>2014-05-30T20:29:58+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/05/30/md5-digest</id>
    <content type="html"><![CDATA[<p>对于一个字符串做md5，例如：&#8221;<order></order>123456&#8221;做完md5后，比较常见的结果是：<code>2e08539049ac0f6b5b4377ec20145c06</code>，即十六进制的表示形式，长度一般是32位，有人也用16位的表示，就是把32位的字符串前后各去掉8位后的结果，但不多见。还有就是用md5的digest值，这是一个16字节的字符串，不容易看，但可以转换成ascii后观察，比如上面的digest就是：<code>[46, 8, 83, 144, 73, 172, 15, 107, 91, 67, 119, 236, 32, 20, 92, 6]</code>， 如果你还看不清的话，可以考虑把这些ascii转成十六进制再看看：<code>['2e', '08', '53', '90', '49', 'ac', '0f', '6b', '5b', '43', '77', 'ec', '20', '14', '5c', '06']</code>，是不是很熟悉了，对就是一开始那个32位长的字符串。</p>

<p>在对某通的接口开发中遇到对发送数据校验，文档中说的是对数据进行md5再做base64，通常就是把那个32位长的字符串做base64，但怎么也对不上，后来再研究发现其实是用digest的结果做base64，太坑人了是吧，文档这个东西，能写详细就写详细点，没坏处。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[dive-into-tornado]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/03/27/dive-into-tornado/"/>
    <updated>2014-03-27T21:22:58+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/03/27/dive-into-tornado</id>
    <content type="html"><![CDATA[<p>早就有这样的计划，要深入了解自己在用的工具，veil算一个，tornado算一个，flask算一个……当然还有好多，总得一个个看一番，好在这些库都写得足够简单，不至于一下子看不懂，而且借助pycharm这样优秀的工具，一步步跟踪代码也给深入理解框架极大的帮助，所以，开始吧。（也好久都没更新过技术博客的内容了）</p>

<p>终于可以再让Mac发挥发挥余热了，pycharm用的社区版，估计对于学习够用了。tornado升级到了稳定的3.2版，也是目前的最新版，先慢慢研读官方的文档，再慢慢看完api。</p>

<p>keymap是个问题，平时用键盘的时候，用的是default键位，现在改用MacOS10.5+的键位，还算是熟悉，但最基本的几个（查找文件、查找符号、搜索、重构等重新熟悉了，再高级的用法估计社区版不支持）</p>

<p>在写hello，world例子的时候，处理GET我直接就下意识返回了想要的字符串，没想到运行起来是500 error，仔细一看原来官方的例子中处理GET是要调用<code>self.write('xxx')</code>，然后我就看了下self.write做了什么，self是我定义的class，但这个class继承自tornado.web.RequestHandler, 于是看tornado.web.RequestHandler的write做什么，write的参数叫chunk，并不是简单的叫str之类的东西，也就是说不限于str，有可能是些别的东西，比如注释中说如果你write了一个dict，tornado会转换成JSON，并且把Content-Type给你设置好，现在的veil也支持了这个优秀特性。还提到了list不会被转换成JSON格式，因为一个漏洞（坑），具体看<a href="http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx/">这里</a>，简单讲，就是用script的src指向一个网站需要登陆后才能访问的地址，因为你如果登陆过的话，cookie信息会随之发送到这个地址，此时如果你去了一个邪恶的网站，他里面有些脚本，引用刚刚提到的你需要登陆的网址，你浏览器会把你的一些信息带上，请求这个地址，这个地址会返回一些你的个人资料，比如是用JSON的array回给你，但邪恶网站把javascript array的constructor改写了，你拿到JSON的array会被自动转成js array，这样邪恶网站会收集到你的信息，然后再发送回自己一个接受数据的接口就可以了。避免方法就是：返回JSON的时候用对象方式；这种关键信息用POST提交，script标签只会发送GET请求；现代高级浏览器都不会有问题，大可放心。转换成了byte string（就是str）放入chunk_buffer，一起写到output。</p>

<p>我们的handler很简单，实现了get方法，然后write了一个字符串，但后来呢？或许应该从另一条路看起——从url被映射到handler看起。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[return-value-in-jquery-json-datatype]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/01/23/return-value-in-jquery-json-datatype/"/>
    <updated>2014-01-23T18:57:21+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/01/23/return-value-in-jquery-json-datatype</id>
    <content type="html"><![CDATA[<p>向api server发送请求做一件事的时候，比如修改密码，server做完后没有返回值，response code是200。这在原来的时候没问题，“原来”是指ajax的dataType未指定的时候，jQuery会自己猜测用什么，但这次指定了server的response是json，所以，即便是看到200 code也未能调用OnSuccess，空返回值对于json是不合法的，于是返回一个什么东西就好，当然要先to_json再返回。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[nginx-and-dependences]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/01/16/nginx-and-dependences/"/>
    <updated>2014-01-16T18:46:33+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/01/16/nginx-and-dependences</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.34.tar.gz
</span><span class='line'>wget http://www.openssl.org/source/openssl-1.0.1f.tar.gz
</span><span class='line'>wget http://nginx.org/download/nginx-1.5.8.tar.gz
</span></code></pre></td></tr></table></div></figure>


<p>default install pcre and openssl</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>nginx configure
</span><span class='line'>+gzip
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Configuration summary
</span><span class='line'>  + using system PCRE library
</span><span class='line'>  + OpenSSL library is not used
</span><span class='line'>  + md5: using system crypto library
</span><span class='line'>  + sha1: using system crypto library
</span><span class='line'>  + using system zlib library
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[lxml-and-dependences]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/01/16/lxml-and-dependences/"/>
    <updated>2014-01-16T18:31:09+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/01/16/lxml-and-dependences</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install libxml2-dev
</span><span class='line'>sudo apt-get install libxslt1-dev
</span><span class='line'>sudo apt-get install python-dev  （if Python.h: No file or dir..）
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[daemon-in-nginx]]></title>
    <link href="http://www.youth2009.org/www/blog/2014/01/06/daemon-in-nginx/"/>
    <updated>2014-01-06T21:57:39+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2014/01/06/daemon-in-nginx</id>
    <content type="html"><![CDATA[<p>最近要把bnly重新运行起来，前两天整理了cli版本的程序，放到<a href="GitHub">https://github.com/dawncold/bnly-cli</a>，另一个web版的放到了bitbucket上的私有仓库，准备做部署的时候用，没想到bitbucket最近没有被kill，难道放开了？</p>

<p>用supervisor做进程管理的时候被nginx坑了，由于nginx的配置很强大，现在还处在搭建环境的初期，很多配置写不完整，导致了nginx总是在频繁启动，log中看到的是80端口已经被占用。。。找了半天只有nginx占着80，而且又不会开多个nginx（supervisor的配置中没有明确说开多个程序，默认一个），搜了挺长时间都没有结果。</p>

<p>突然想到了daemon。</p>

<p>nginx的文档建议生产环境应该off，但这个和我遇到的问题无关。默认daemon开了，supervisor运行后会认为nginx退出了，再启动一个，其实上一个已经启动成功，所以就总看到80端口被占用，于是在nginx的配置上加<code>deamon off</code>即可。</p>

<p>是不是很坑？</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Object.keys-and-JSON-in-IE6]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/12/08/object-dot-keys-and-json-in-ie6/"/>
    <updated>2013-12-08T14:52:12+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/12/08/object-dot-keys-and-json-in-ie6</id>
    <content type="html"><![CDATA[<p>下单页面用到了js中的JSON和Object.keys，都是坑。</p>

<p>JSON虽然是build-in的JSON parser和stringify方法，但IE6，7，8(Q)都是无法使用的，如果用jQuery的话，可以用jQuery的parseJSON来解析，但stringify的话需要依赖第三方库或者自己实现，我用了JSON3.js这个库。首选build-in的parse和stringify方法，如果没有就实现。github地址：<a href="https://github.com/bestiejs/json3">https://github.com/bestiejs/json3</a></p>

<p>同样的Object.keys()因为不能在IE9下使用，因为要取一个Object的keys数量，有的时候是用Object的keys列表，所以以后为了兼容，就只能：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">p</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[useful-shell-command]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/12/07/useful-shell-command/"/>
    <updated>2013-12-07T22:28:53+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/12/07/useful-shell-command</id>
    <content type="html"><![CDATA[<p>找到size为0的文件，并删除：<code>find -type f -size 0 | xargs rm</code></p>

<p>替换Linux的换行成windows的：<code>ls | xargs perl -i -pe 's/\n/\r\n/g'</code></p>

<p>批量改名哦（把<em>.md改为</em>.markdown）：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">for </span>i in <span class="sb">`</span>ls *.md<span class="sb">`</span>;<span class="k">do </span>mv <span class="nv">$i</span> <span class="sb">`</span><span class="nb">echo</span> <span class="nv">$i</span> | sed <span class="s1">&#39;s/.md/.markdown/&#39;</span><span class="sb">`</span>;<span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[upgrade-to-linode-for-not-waiting]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/12/03/upgrade-to-linode-for-not-waiting/"/>
    <updated>2013-12-03T22:32:58+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/12/03/upgrade-to-linode-for-not-waiting</id>
    <content type="html"><![CDATA[<p>上个月买了linode的vps，不知道干什么用，光翻墙了，月底干脆就关了，觉得这样翻墙的成本太高了，完全可以租个便宜的vps来用，后来觉得还是linode好。</p>

<p>在用linode之前用过digitalocean，那时候DO刚刚起步，速度不错，主要是华人不多，而且价格一如既往的便宜，公司决定买这个翻墙用，但后来速度一天天慢下来了，看到最近DO的推广力度增大，可能这就是为啥速度不理想的原因。</p>

<p>prgmr.com是个不错的vps，技术感超强，但很可惜在公司速度很好，160ms的ping延迟，不过回到家发现延迟到了400+，真不明白网络就能差这么多。好处是能不交费先用一段时间体验，support很好。</p>

<p>ramhost.us据说也不错，不会超售，在家wget一个文件速度上了400+，可惜就那么一次，也不知道是不是那一次把所有RP全用光了，后来怎么都是个位数的速度。同样技术感很强，缺点就是support靠人，站长貌似也不总是盯着这个，没拿到trial来试试。</p>

<p>其实vpsee这个也能考虑试试，linuxtoy.org放在上面，感觉访问速度挺好，价格10刀，不算是便宜，但和linode比便宜一半了。以前用过几个月的vps，很稳定，被GFW过IP，站长免费给换，总之一切都好。</p>

<p>最后是linode，又回来了，很早很早的时候，大约是初中那会，对建站很感兴趣，那时候还没有流行vps，都是shared hosting，当时买过hostmonster的一年服务，没做啥东西，算是浪费了吧。后来过了挺长时间逐渐接触到vps，用过yardvps，amazon的也试过，那时候没法买linode，因为信用卡，就想着哪天能有信用卡了就可以自由买这个了，现在确实能买了，也不知道买了干嘛了，以为能做个app，但终究没想出来做什么。好在能解决访问Google等网站时候的延迟，有时候大脑在想一件事，google一下结果，此时慢了，可能又跳跃到别的事情上了。或许人和人不太一样。</p>

<p>Linode Referral URL：<a href="https://www.linode.com/?r=84379f19216416e48085518afcde3beb02aee9c8">https://www.linode.com/?r=84379f19216416e48085518afcde3beb02aee9c8</a></p>

<p>Linode Referral Code：84379f19216416e48085518afcde3beb02aee9c8</p>

<p>如果用这个code注册linode，在你用满3个月的时候我们彼此能够得到20刀的奖励：）</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rarp]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/08/25/rarp/"/>
    <updated>2013-08-25T12:01:00+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/08/25/rarp</id>
    <content type="html"><![CDATA[<h2>Packet Format</h2>

<p>RARP packet is identical to ARP packet, differences: RARP &lsquo;type&rsquo; field is 0x8035 for request and reply and &lsquo;op&rsquo; field is 3 for RARP request and 4 for RARP reply.</p>

<p>RARP&rsquo;s reply is unicast.</p>

<p>The implementation of RARP server is complex&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[timestamp]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/08/20/timestamp/"/>
    <updated>2013-08-20T21:56:00+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/08/20/timestamp</id>
    <content type="html"><![CDATA[<p>今天在做批量导入图片功能的时候，发现一个问题，原先save image过程用timestamp当文件名，这样在一般使用的时候倒是没什么问题了，但让程序去做的时候，timestamp就显得不好用了，程序跑的很快，可能三四张图都在1s内处理完上传，这样就很难保证文件名不重复。</p>

<p>传一张停1秒呢？问题不大，但看着还是不保险，而且变慢了，因为要等。。。</p>

<p>纯粹uuid倒是问题不大，但日后管理起来确实就不爽了——看uuid根本不知道谁先谁后，所以就把tiemstamp和uuid4连起来当新文件名，这样程序批量传也不会有问题（其实概率已经低到这个时代可接受的程度吧），又在trade off了。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[conceptual-models]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/08/19/conceptual-models/"/>
    <updated>2013-08-19T22:12:00+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/08/19/conceptual-models</id>
    <content type="html"><![CDATA[<h2>Conceptual Models</h2>

<p>Designing software so that its structure reflects that of the problem.</p>

<p>Analysis is not only listing requirments, but also looking behind the surface requirments to come up with a mental model of what is going in the problem.</p>

<p>Conceptual model is a human artifact.</p>

<p>Developers use conceptual models to represent a model of the real world in order to understanding the read part of problems easily.</p>

<p>There is no right or wrong model, merely one that is more useful for the job at hand.</p>

<p>The example, snooker simulation, if your choose a Einsteinian model would be flexible enought to low speed or high speed situation, but the complexity is totally different you know, so the flexibility and many others aspects need a trade-off.</p>

<p>When building a model in a programming language, maybe Python, you may get lost in this language or building this model using some features belong to Python, so this model is a Python-model, and it is hard to be implemented in other languages such as Java, PHP, etc. To avoid these problems, you need a third-party analysis techniques.</p>

<p>Only domain experts could build right model, because of their domain knowledge.</p>

<p>Conceptual model is closely to software interfaces rather than software implementations. One of the important things about OO is that it separates interface from implementation.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[arp]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/08/18/arp/"/>
    <updated>2013-08-18T20:38:00+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/08/18/arp</id>
    <content type="html"><![CDATA[<pre><code>32 bits Internet address
|                   /|
|ARP                 |RARP
|/                   |
48 bits Ethernet address
</code></pre>

<h1>Gratuitous ARP</h1>

<ol>
<li>send its own IP to verify whether someone has used this.</li>
<li>update old MAC address in ARP cache</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[manage-rasp-pi-in-internal-network]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/08/08/manage-rasp-pi-in-internal-network/"/>
    <updated>2013-08-08T22:16:00+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/08/08/manage-rasp-pi-in-internal-network</id>
    <content type="html"><![CDATA[<p>今天早晨去公司后一开邮箱发现好多树莓派发来的警告信，如果是一封信可能是误报，但这么多，难道是真的有人闯入？不过看了大部分的图片都是空空的房间，但仍然有新的邮件过来，看来是红外探测器出问题了。</p>

<p>想了半天以为是昨天加的DHT11在读取数据的时候是不是改变了GPIO的布局，导致探测器的数据口得到数据，激活了它？后来证明不是。猜测啊：探测器放到了无线网卡下方，无线网卡有个工作指示灯一直闪烁，会不会触发了探测器，因为我换了个地方后探测器就正常工作了。</p>

<p>在没有远程管理的前提下，解决的方法是去七牛把bucket先删掉，这样就不能再上传图片了，然后去sendgrid修改密码，这样就不能发送邮件了。其实我期待能引发一个异常，这样程序就退出了，但很可惜，七牛的lib似乎做了些处理，删掉bucket或者修改API KEY这样的方法也就是给个提示出来，他们处理了异常，不过好在sendgrid的lib没有处理异常，密码错误后引发的异常终止了程序！GREAT！我还担心了一天摄像头不断拍照会不会坏掉。</p>

<p>上面都是背景吧，主题是一个远程管理的重要性，特别是出现这种突发情况而你又不在边上。</p>

<p>受限于当地的网络环境，树莓派在一个很深的网络中——有家庭的路由器，再往上是小区的路由器，也许再往上就是公网IP了，和在原来的家不同，直接能拿到公网IP，这样基本可以让树莓派暴露在公网上，管理起来当然方便了。穿透这么多层网络，感觉好麻烦，虽然毕业论文是NAT穿透的应用。。。</p>

<p>简单的做法就是利用第三方，我有一个VPS，当然在海外，除了速度上不如国内快之外，别的没啥了。</p>

<p>于是在树莓派上建立一个反向SSH：<code>ssh -p VPS_PORT -fNR 2222:127.0.0.1:22 USER@VPS_HOST</code>，其中VPS_PORT如果你没修改默认的22的话，可以不写<code>-p VPS_PORT</code>，其他的，比如<code>fN</code>，你可以先不写，测试成功后再写上，只做端口转发而不执行命令。后面的R表示反向连接：就是127.0.0.1的22端口在后面远程主机中映射到2222端口。这样，登陆了远程主机的人，访问2222端口就可以访问到树莓派的22端口了。</p>

<p>再临时生成几个rsa key加到authorized_keys中就可以不输密码登陆了，虽然速度稍慢一点，但至少是可用的！</p>

<p>测试通过后使用autossh建立连接，这样即便是中断也会重连上：）</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[basestring-and-str-in-python2x]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/08/08/basestring-and-str-in-python2x/"/>
    <updated>2013-08-08T21:39:00+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/08/08/basestring-and-str-in-python2x</id>
    <content type="html"><![CDATA[<p>今天在代码中发现原本过滤str的一个func被写成了过滤basestring，于是查了下basestring和str的区别：(在3.0之前)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>    object
</span><span class='line'>         |
</span><span class='line'>         |
</span><span class='line'>     basestring
</span><span class='line'>        / \
</span><span class='line'>       /   \
</span><span class='line'>     str  unicode</span></code></pre></td></tr></table></div></figure>


<p>3.0之前python中有plain string和unicode string，前者是ascii中的那些字符，后者就是所有字符了，因为historical legacy。。。python出现的时候还木有unicode，所以很多python的lib是需要慢慢转换的，当然到了3.0就会不复存在了，全是unicode。</p>

<p>这样的话就清楚了，str代表了那些ascii字符，unicode就是全部的字符，他们都继承自basestring。basestring是从python2.3开始引入的。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[opencv-with-pi]]></title>
    <link href="http://www.youth2009.org/www/blog/2013/08/03/opencv-with-pi/"/>
    <updated>2013-08-03T17:44:00+08:00</updated>
    <id>http://www.youth2009.org/www/blog/2013/08/03/opencv-with-pi</id>
    <content type="html"><![CDATA[<p>想了好久都觉得连续拍照片做监控实在是没什么效率，默认情况应该是什么都不做，如果发现有人来了才拍下来或者录下来，但用标配的摄像头录像实在是会录出非常大的文件，保存文件又是问题。在<a href="http://www.raspberrypi.org/archives/4207">官网的博客</a>中看到了一个用opencv做的人脸识别，可以这样干嘛。于是紧随那片文章开始干。</p>

<p>由于标配摄像头模块不是usb设备，所以需要重新编译使用的几个程序，比如raspistill和raspivid等等。</p>

<p>另外，如果直接在raspberrypi上编译，需要安装一些软件：<a href="http://thinkrpi.wordpress.com/2013/04/05/step-3-install-softwares-for-webcam-and-computer-vision/">http://thinkrpi.wordpress.com/2013/04/05/step-3-install-softwares-for-webcam-and-computer-vision/</a></p>

<p>具体的操作请参照：<a href="http://thinkrpi.wordpress.com/2013/05/22/opencv-and-camera-board-csi/">http://thinkrpi.wordpress.com/2013/05/22/opencv-and-camera-board-csi/</a></p>

<p>替换arm-linux.cmake的命令:<code>sed -i 's/if (DEFINED CMAKE_TOOLCHAIN_FILE)/if (NOT DEFINED CMAKE_TOOLCHAIN_FILE)/g' arm-linux.cmake</code>，看准了arm-linux.cmake的路径，我运行命令的时候已经到了和arm-linux.cmake一个目录下了。</p>
]]></content>
  </entry>
  
</feed>
